#include<math.h>
#include<fftw3.h>

static float
calc_magnitude (const float * freq, int freqlen, float * magnitude)
{
	int k ;
	float max = 0.0 ;

	for (k = 1 ; k < freqlen / 2 ; k++)
	{	magnitude [k] = sqrt (freq [k] * freq [k] + freq [freqlen - k - 1] * freq [freqlen - k - 1]) ;
		max = MAX (max, magnitude [k]) ;
		} ;
	magnitude [0] = 0.0 ;

	return max ;
}

